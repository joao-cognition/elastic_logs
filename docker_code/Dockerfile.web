# Dockerfile for Web Frontend
# This Dockerfile contains several issues for demonstration purposes

# Issue 1: Using deprecated base image
FROM node:14-alpine

# Issue 2: No specific working directory set early
COPY package*.json ./

# Issue 3: Running npm install before copying all files (cache invalidation issue)
RUN npm install

# Issue 4: Copying node_modules from host (should be in .dockerignore)
COPY . .

# Issue 5: Building in production image instead of multi-stage build
RUN npm run build

# Issue 6: Exposing development server port
EXPOSE 3000

# Issue 7: Using development mode in production
ENV NODE_ENV=development

# Issue 8: No non-root user
# Issue 9: No .dockerignore mentioned/used

# Issue 10: Using npm start instead of serving static files
CMD ["npm", "start"]
