<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Performance Anomaly Analysis Report</title>
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        h2 {
            color: #34495e;
            margin-top: 30px;
            border-left: 4px solid #3498db;
            padding-left: 10px;
        }
        h3 {
            color: #7f8c8d;
        }
        .summary-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        .summary-box h2 {
            color: white;
            border-left-color: white;
        }
        .metric {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 10px 20px;
            border-radius: 5px;
            margin: 5px;
        }
        .metric-value {
            font-size: 24px;
            font-weight: bold;
        }
        .metric-label {
            font-size: 12px;
            opacity: 0.9;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            background: white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background-color: #3498db;
            color: white;
        }
        tr:hover {
            background-color: #f5f5f5;
        }
        .severity-critical {
            background-color: #e74c3c;
            color: white;
            padding: 3px 8px;
            border-radius: 3px;
        }
        .severity-high {
            background-color: #e67e22;
            color: white;
            padding: 3px 8px;
            border-radius: 3px;
        }
        .severity-medium {
            background-color: #f39c12;
            color: white;
            padding: 3px 8px;
            border-radius: 3px;
        }
        .severity-low {
            background-color: #27ae60;
            color: white;
            padding: 3px 8px;
            border-radius: 3px;
        }
        .status-healthy {
            color: #27ae60;
            font-weight: bold;
        }
        .status-degraded {
            color: #f39c12;
            font-weight: bold;
        }
        .status-unhealthy {
            color: #e74c3c;
            font-weight: bold;
        }
        .card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin: 15px 0;
        }
        .recommendation {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 10px 15px;
            margin: 10px 0;
        }
        code {
            background: #f8f9fa;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
        .timestamp {
            color: #7f8c8d;
            font-size: 12px;
        }
        footer {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
            color: #7f8c8d;
            font-size: 12px;
        }
    </style>
    
</head>
<body>
    <h1>Performance Anomaly Analysis Report</h1>
    <p class="timestamp">Generated: 2025-12-02 11:34:34 UTC</p>

    <div class="summary-box">
        <h2>Performance Overview</h2>
        <div class="metric">
            <div class="metric-value">100</div>
            <div class="metric-label">Requests Analyzed</div>
        </div>
        <div class="metric">
            <div class="metric-value">3077ms</div>
            <div class="metric-label">Avg Response Time</div>
        </div>
        <div class="metric">
            <div class="metric-value">20609.75ms</div>
            <div class="metric-label">P95 Response Time</div>
        </div>
        <div class="metric">
            <div class="metric-value">27579.74ms</div>
            <div class="metric-label">P99 Response Time</div>
        </div>
        <div class="metric">
            <div class="metric-value">7</div>
            <div class="metric-label">Slow Endpoints</div>
        </div>
    </div>

    <div class="card">
        <h2>Overall Response Time Statistics</h2>
        <table>
            <tr><th>Metric</th><th>Value (ms)</th></tr>
            <tr><td>Minimum</td><td>51</td></tr>
            <tr><td>Maximum</td><td>29435</td></tr>
            <tr><td>Average</td><td>3077</td></tr>
            <tr><td>Median</td><td>168.5</td></tr>
            <tr><td>P95</td><td>20609.75</td></tr>
            <tr><td>P99</td><td>27579.74</td></tr>
            <tr><td>Standard Deviation</td><td>6836.63</td></tr>
        </table>
    </div>

    <div class="card">
        <h2>Response Times by Endpoint</h2>
        <table>
            <tr><th>Endpoint</th><th>Avg (ms)</th><th>P95 (ms)</th><th>P99 (ms)</th><th>Max (ms)</th></tr>
            <tr>
                <td><code>/api/search</code></td>
                <td>1575.62</td>
                <td>6064.0</td>
                <td>19619.2</td>
                <td>23008</td>
            </tr>
            <tr>
                <td><code>/api/products</code></td>
                <td>2716.46</td>
                <td>16171.2</td>
                <td>18003.84</td>
                <td>18462</td>
            </tr>
            <tr>
                <td><code>/api/reports</code></td>
                <td>3204.2</td>
                <td>15054.85</td>
                <td>26558.97</td>
                <td>29435</td>
            </tr>
            <tr>
                <td><code>/api/users</code></td>
                <td>5965.56</td>
                <td>21878.5</td>
                <td>22062.1</td>
                <td>22108</td>
            </tr>
            <tr>
                <td><code>/api/health</code></td>
                <td>1535.32</td>
                <td>7104.6</td>
                <td>17858.52</td>
                <td>20547</td>
            </tr>
            <tr>
                <td><code>/api/checkout</code></td>
                <td>1626.67</td>
                <td>8024.4</td>
                <td>12076.88</td>
                <td>13090</td>
            </tr>
            <tr>
                <td><code>/api/orders</code></td>
                <td>6261.71</td>
                <td>23988.3</td>
                <td>26846.46</td>
                <td>27561</td>
            </tr>
        </table>
    </div>

    <div class="card">
        <h2>Response Times by Service</h2>
        <table>
            <tr><th>Service</th><th>Avg (ms)</th><th>P95 (ms)</th><th>P99 (ms)</th><th>Max (ms)</th></tr>
            <tr>
                <td>order-service</td>
                <td>4792.65</td>
                <td>23198.6</td>
                <td>26688.52</td>
                <td>27561</td>
            </tr>
            <tr>
                <td>api-gateway</td>
                <td>1716.31</td>
                <td>12418.0</td>
                <td>12955.6</td>
                <td>13090</td>
            </tr>
            <tr>
                <td>product-service</td>
                <td>2625.23</td>
                <td>15652.75</td>
                <td>20561.74</td>
                <td>21802</td>
            </tr>
            <tr>
                <td>user-service</td>
                <td>2014</td>
                <td>11393.25</td>
                <td>12240.25</td>
                <td>12452</td>
            </tr>
            <tr>
                <td>security-monitor</td>
                <td>3628.62</td>
                <td>23008.0</td>
                <td>28149.6</td>
                <td>29435</td>
            </tr>
            <tr>
                <td>cache-service</td>
                <td>3386.67</td>
                <td>19400.25</td>
                <td>20317.65</td>
                <td>20547</td>
            </tr>
        </table>
    </div>

    <div class="card">
        <h2>Slow Endpoints (Avg > 1000ms)</h2>
        <table>
            <tr><th>Endpoint</th><th>Avg (ms)</th><th>P95 (ms)</th><th>Max (ms)</th></tr>
            <tr>
                <td><code>/api/search</code></td>
                <td>1575.62</td>
                <td>6064.0</td>
                <td>23008</td>
            </tr>
            <tr>
                <td><code>/api/products</code></td>
                <td>2716.46</td>
                <td>16171.2</td>
                <td>18462</td>
            </tr>
            <tr>
                <td><code>/api/reports</code></td>
                <td>3204.2</td>
                <td>15054.85</td>
                <td>29435</td>
            </tr>
            <tr>
                <td><code>/api/users</code></td>
                <td>5965.56</td>
                <td>21878.5</td>
                <td>22108</td>
            </tr>
            <tr>
                <td><code>/api/health</code></td>
                <td>1535.32</td>
                <td>7104.6</td>
                <td>20547</td>
            </tr>
            <tr>
                <td><code>/api/checkout</code></td>
                <td>1626.67</td>
                <td>8024.4</td>
                <td>13090</td>
            </tr>
            <tr>
                <td><code>/api/orders</code></td>
                <td>6261.71</td>
                <td>23988.3</td>
                <td>27561</td>
            </tr>
        </table>
    </div>

    <div class="card">
        <h2>Response Time Spikes (> 10s)</h2>
        <table>
            <tr><th>Log ID</th><th>Timestamp</th><th>Service</th><th>Endpoint</th><th>Response Time (ms)</th></tr>
            <tr>
                <td>log-0007</td>
                <td>2025-11-29T10:30:00Z</td>
                <td>user-service</td>
                <td><code>/api/users</code></td>
                <td>10527</td>
            </tr>
            <tr>
                <td>log-0013</td>
                <td>2025-11-29T11:00:00Z</td>
                <td>security-monitor</td>
                <td><code>/api/products</code></td>
                <td>14644</td>
            </tr>
            <tr>
                <td>log-0017</td>
                <td>2025-11-29T11:20:00Z</td>
                <td>api-gateway</td>
                <td><code>/api/checkout</code></td>
                <td>13090</td>
            </tr>
            <tr>
                <td>log-0020</td>
                <td>2025-11-29T11:35:00Z</td>
                <td>security-monitor</td>
                <td><code>/api/search</code></td>
                <td>23008</td>
            </tr>
            <tr>
                <td>log-0038</td>
                <td>2025-11-29T13:05:00Z</td>
                <td>order-service</td>
                <td><code>/api/orders</code></td>
                <td>27561</td>
            </tr>
            <tr>
                <td>log-0039</td>
                <td>2025-11-29T13:10:00Z</td>
                <td>order-service</td>
                <td><code>/api/orders</code></td>
                <td>15652</td>
            </tr>
            <tr>
                <td>log-0040</td>
                <td>2025-11-29T13:15:00Z</td>
                <td>order-service</td>
                <td><code>/api/reports</code></td>
                <td>14298</td>
            </tr>
            <tr>
                <td>log-0046</td>
                <td>2025-11-29T13:45:00Z</td>
                <td>user-service</td>
                <td><code>/api/users</code></td>
                <td>12452</td>
            </tr>
            <tr>
                <td>log-0047</td>
                <td>2025-11-29T13:50:00Z</td>
                <td>api-gateway</td>
                <td><code>/api/reports</code></td>
                <td>12194</td>
            </tr>
            <tr>
                <td>log-0048</td>
                <td>2025-11-29T13:55:00Z</td>
                <td>product-service</td>
                <td><code>/api/users</code></td>
                <td>15896</td>
            </tr>
            <tr>
                <td>log-0056</td>
                <td>2025-11-29T14:35:00Z</td>
                <td>order-service</td>
                <td><code>/api/users</code></td>
                <td>22108</td>
            </tr>
            <tr>
                <td>log-0057</td>
                <td>2025-11-29T14:40:00Z</td>
                <td>security-monitor</td>
                <td><code>/api/reports</code></td>
                <td>29435</td>
            </tr>
            <tr>
                <td>log-0059</td>
                <td>2025-11-29T14:50:00Z</td>
                <td>cache-service</td>
                <td><code>/api/products</code></td>
                <td>18462</td>
            </tr>
            <tr>
                <td>log-0060</td>
                <td>2025-11-29T14:55:00Z</td>
                <td>product-service</td>
                <td><code>/api/users</code></td>
                <td>21802</td>
            </tr>
            <tr>
                <td>log-0062</td>
                <td>2025-11-29T15:05:00Z</td>
                <td>product-service</td>
                <td><code>/api/users</code></td>
                <td>11031</td>
            </tr>
            <tr>
                <td>log-0097</td>
                <td>2025-11-29T18:00:00Z</td>
                <td>cache-service</td>
                <td><code>/api/health</code></td>
                <td>20547</td>
            </tr>
        </table>
    </div>

    <div class="card">
        <h2>Resource Utilization Issues</h2>
        <h3>Disk I/O Issues</h3>
        <table>
            <tr><th>Log ID</th><th>Timestamp</th><th>Service</th><th>Read Latency (ms)</th><th>Write Latency (ms)</th><th>IOPS</th></tr>
            <tr>
                <td>log-0007</td>
                <td>2025-11-29T10:30:00Z</td>
                <td>user-service</td>
                <td>267</td>
                <td>515</td>
                <td>164</td>
            </tr>
            <tr>
                <td>log-0017</td>
                <td>2025-11-29T11:20:00Z</td>
                <td>api-gateway</td>
                <td>494</td>
                <td>252</td>
                <td>174</td>
            </tr>
            <tr>
                <td>log-0028</td>
                <td>2025-11-29T12:15:00Z</td>
                <td>product-service</td>
                <td>253</td>
                <td>268</td>
                <td>148</td>
            </tr>
            <tr>
                <td>log-0040</td>
                <td>2025-11-29T13:15:00Z</td>
                <td>order-service</td>
                <td>488</td>
                <td>252</td>
                <td>169</td>
            </tr>
            <tr>
                <td>log-0046</td>
                <td>2025-11-29T13:45:00Z</td>
                <td>user-service</td>
                <td>134</td>
                <td>633</td>
                <td>156</td>
            </tr>
            <tr>
                <td>log-0062</td>
                <td>2025-11-29T15:05:00Z</td>
                <td>product-service</td>
                <td>234</td>
                <td>765</td>
                <td>127</td>
            </tr>
            <tr>
                <td>log-0099</td>
                <td>2025-11-29T18:10:00Z</td>
                <td>security-monitor</td>
                <td>233</td>
                <td>294</td>
                <td>72</td>
            </tr>
        </table>
        <h3>Connection Pool Issues</h3>
        <table>
            <tr><th>Log ID</th><th>Timestamp</th><th>Service</th><th>Message</th></tr>
            <tr>
                <td>log-0020</td>
                <td>2025-11-29T11:35:00Z</td>
                <td>security-monitor</td>
                <td>Internal server error: database connection pool exhausted</td>
            </tr>
            <tr>
                <td>log-0038</td>
                <td>2025-11-29T13:05:00Z</td>
                <td>order-service</td>
                <td>Internal server error: database connection pool exhausted</td>
            </tr>
            <tr>
                <td>log-0047</td>
                <td>2025-11-29T13:50:00Z</td>
                <td>api-gateway</td>
                <td>Internal server error: database connection pool exhausted</td>
            </tr>
            <tr>
                <td>log-0056</td>
                <td>2025-11-29T14:35:00Z</td>
                <td>order-service</td>
                <td>Internal server error: database connection pool exhausted</td>
            </tr>
        </table>
    </div>

    <div class="card">
        <h2>Database Performance Issues</h2>
        <p><strong>Total Database Issues:</strong> 7</p>
        <table>
            <tr><th>Log ID</th><th>Timestamp</th><th>Service</th><th>Message</th></tr>
            <tr>
                <td>log-0020</td>
                <td>2025-11-29T11:35:00Z</td>
                <td>security-monitor</td>
                <td>Internal server error: database connection pool exhausted</td>
            </tr>
            <tr>
                <td>log-0028</td>
                <td>2025-11-29T12:15:00Z</td>
                <td>product-service</td>
                <td>Slow database query detected</td>
            </tr>
            <tr>
                <td>log-0038</td>
                <td>2025-11-29T13:05:00Z</td>
                <td>order-service</td>
                <td>Internal server error: database connection pool exhausted</td>
            </tr>
            <tr>
                <td>log-0047</td>
                <td>2025-11-29T13:50:00Z</td>
                <td>api-gateway</td>
                <td>Internal server error: database connection pool exhausted</td>
            </tr>
            <tr>
                <td>log-0056</td>
                <td>2025-11-29T14:35:00Z</td>
                <td>order-service</td>
                <td>Internal server error: database connection pool exhausted</td>
            </tr>
            <tr>
                <td>log-0062</td>
                <td>2025-11-29T15:05:00Z</td>
                <td>product-service</td>
                <td>Slow database query detected</td>
            </tr>
            <tr>
                <td>log-0099</td>
                <td>2025-11-29T18:10:00Z</td>
                <td>security-monitor</td>
                <td>Slow database query detected</td>
            </tr>
        </table>
    </div>

    <div class="card">
        <h2>Service Health Status</h2>
        <table>
            <tr><th>Service</th><th>Total Requests</th><th>Errors</th><th>Error Rate</th><th>Status</th></tr>
            <tr>
                <td>order-service</td>
                <td>17</td>
                <td>3</td>
                <td>17.65%</td>
                <td><span class="status-unhealthy">UNHEALTHY</span></td>
            </tr>
            <tr>
                <td>api-gateway</td>
                <td>16</td>
                <td>1</td>
                <td>6.25%</td>
                <td><span class="status-degraded">DEGRADED</span></td>
            </tr>
            <tr>
                <td>product-service</td>
                <td>22</td>
                <td>2</td>
                <td>9.09%</td>
                <td><span class="status-degraded">DEGRADED</span></td>
            </tr>
            <tr>
                <td>user-service</td>
                <td>12</td>
                <td>0</td>
                <td>0.0%</td>
                <td><span class="status-healthy">HEALTHY</span></td>
            </tr>
            <tr>
                <td>security-monitor</td>
                <td>21</td>
                <td>3</td>
                <td>14.29%</td>
                <td><span class="status-degraded">DEGRADED</span></td>
            </tr>
            <tr>
                <td>cache-service</td>
                <td>12</td>
                <td>2</td>
                <td>16.67%</td>
                <td><span class="status-unhealthy">UNHEALTHY</span></td>
            </tr>
        </table>
    </div>

    <div class="card">
        <h2>Hourly Performance Analysis</h2>
        <table>
            <tr><th>Hour (UTC)</th><th>Avg (ms)</th><th>P95 (ms)</th><th>P99 (ms)</th></tr>
            <tr>
                <td>10:00</td>
                <td>1012.42</td>
                <td>4971.45</td>
                <td>9415.89</td>
            </tr>
            <tr>
                <td>11:00</td>
                <td>4333.17</td>
                <td>18407.8</td>
                <td>22087.96</td>
            </tr>
            <tr>
                <td>12:00</td>
                <td>617.92</td>
                <td>2774.65</td>
                <td>5131.73</td>
            </tr>
            <tr>
                <td>13:00</td>
                <td>8262.67</td>
                <td>21145.25</td>
                <td>26277.85</td>
            </tr>
            <tr>
                <td>14:00</td>
                <td>7751.92</td>
                <td>25405.15</td>
                <td>28629.03</td>
            </tr>
            <tr>
                <td>15:00</td>
                <td>1109.42</td>
                <td>5231.25</td>
                <td>9871.05</td>
            </tr>
            <tr>
                <td>16:00</td>
                <td>201.25</td>
                <td>384.65</td>
                <td>409.73</td>
            </tr>
            <tr>
                <td>17:00</td>
                <td>153.83</td>
                <td>318.45</td>
                <td>450.89</td>
            </tr>
            <tr>
                <td>18:00</td>
                <td>6597.25</td>
                <td>18306.6</td>
                <td>20098.92</td>
            </tr>
        </table>
    </div>

    <div class="card">
        <h2>Peak Load Times</h2>
        <table>
            <tr><th>Hour (UTC)</th><th>Request Count</th></tr>
            <tr><td>10:00</td><td>12</td></tr>
            <tr><td>11:00</td><td>12</td></tr>
            <tr><td>12:00</td><td>12</td></tr>
        </table>
    </div>

    <div class="card">
        <h2>Recommendations</h2>
        <div class='recommendation'>Optimize 7 slow endpoints with avg response time > 1000ms</div>
        <div class='recommendation'>Investigate 7 disk I/O latency issues</div>
        <div class='recommendation'>Increase database connection pool size to prevent exhaustion</div>
        <div class='recommendation'>Investigate 16 response time spikes (>10s)</div>
        <div class='recommendation'>Address issues in unhealthy services: order-service, cache-service</div>
    </div>

    <footer>
        <p>Elastic Logs Analysis Report - Generated by Comprehensive Log Analyzer</p>
    </footer>
</body>
</html>
