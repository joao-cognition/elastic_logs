<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Performance Analysis Report</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
               margin: 0; padding: 20px; background: #f5f5f5; }
        .container { max-width: 1200px; margin: 0 auto; }
        h1 { color: #1565c0; border-bottom: 3px solid #1565c0; padding-bottom: 10px; }
        h2 { color: #333; margin-top: 30px; }
        .summary-cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                         gap: 20px; margin: 20px 0; }
        .card { background: white; padding: 20px; border-radius: 8px;
                 box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .card.highlight { border-left: 4px solid #1565c0; }
        .card.warning { border-left: 4px solid #f57c00; }
        .card h3 { margin: 0 0 10px 0; color: #666; font-size: 14px; }
        .card .value { font-size: 24px; font-weight: bold; color: #333; }
        .card .unit { font-size: 14px; color: #666; }
        table { width: 100%; border-collapse: collapse; background: white;
                 box-shadow: 0 2px 4px rgba(0,0,0,0.1); margin: 20px 0; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #eee; }
        th { background: #f8f8f8; font-weight: 600; }
        tr:hover { background: #f5f5f5; }
        .slow { color: #d32f2f; font-weight: bold; }
        .warning-box { background: #fff3e0; padding: 15px; border-radius: 8px;
                        margin: 10px 0; border-left: 4px solid #f57c00; }
        .insight { background: #e3f2fd; padding: 15px; border-radius: 8px;
                    margin: 10px 0; border-left: 4px solid #1565c0; }
        .timestamp { color: #666; font-size: 12px; }
        .progress-bar { background: #e0e0e0; border-radius: 4px; height: 20px; }
        .progress-fill { background: #1565c0; border-radius: 4px; height: 100%; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Performance Analysis Report</h1>
        <p class="timestamp">Generated: 2025-12-02 11:57:28 UTC</p>

        <h2>Response Time Overview</h2>
        <div class="summary-cards">
            <div class="card highlight">
                <h3>Average</h3>
                <div class="value">4641.28<span class="unit">ms</span></div>
            </div>
            <div class="card">
                <h3>Median</h3>
                <div class="value">147.5<span class="unit">ms</span></div>
            </div>
            <div class="card">
                <h3>P95</h3>
                <div class="value">25216.7<span class="unit">ms</span></div>
            </div>
            <div class="card warning">
                <h3>P99</h3>
                <div class="value">29884.31<span class="unit">ms</span></div>
            </div>
            <div class="card">
                <h3>Min</h3>
                <div class="value">10<span class="unit">ms</span></div>
            </div>
            <div class="card warning">
                <h3>Max</h3>
                <div class="value">29915<span class="unit">ms</span></div>
            </div>
        </div>

        <h2>Slow Requests (>1000ms)</h2>
        <div class="card warning">
            <h3>Total Slow Requests</h3>
            <div class="value">27</div>
        </div>
        <table>
            <tr><th>Timestamp</th><th>Service</th><th>Endpoint</th><th>Response Time</th><th>Status</th></tr>
            <tr><td>2025-12-01T17:20:00Z</td><td>user-service</td><td>/api/users</td><td class="slow">29915ms</td><td>503</td></tr><tr><td>2025-12-01T17:15:00Z</td><td>product-service</td><td>/api/checkout</td><td class="slow">29884ms</td><td>503</td></tr><tr><td>2025-12-01T10:00:00Z</td><td>order-service</td><td>/api/users</td><td class="slow">29132ms</td><td>500</td></tr><tr><td>2025-12-01T15:55:00Z</td><td>order-service</td><td>/api/orders</td><td class="slow">28165ms</td><td>504</td></tr><tr><td>2025-12-01T12:35:00Z</td><td>api-gateway</td><td>/api/users</td><td class="slow">25876ms</td><td>503</td></tr><tr><td>2025-12-01T14:55:00Z</td><td>user-service</td><td>/api/orders</td><td class="slow">25182ms</td><td>504</td></tr><tr><td>2025-12-01T12:05:00Z</td><td>product-service</td><td>/api/users</td><td class="slow">23970ms</td><td>502</td></tr><tr><td>2025-12-01T14:40:00Z</td><td>api-gateway</td><td>/api/users</td><td class="slow">23962ms</td><td>500</td></tr><tr><td>2025-12-01T14:35:00Z</td><td>user-service</td><td>/api/users</td><td class="slow">23480ms</td><td>502</td></tr><tr><td>2025-12-01T16:15:00Z</td><td>user-service</td><td>/api/checkout</td><td class="slow">21112ms</td><td>503</td></tr><tr><td>2025-12-01T16:55:00Z</td><td>product-service</td><td>/api/checkout</td><td class="slow">20870ms</td><td>500</td></tr><tr><td>2025-12-01T15:15:00Z</td><td>product-service</td><td>/api/orders</td><td class="slow">18942ms</td><td>503</td></tr><tr><td>2025-12-01T13:20:00Z</td><td>order-service</td><td>/api/checkout</td><td class="slow">18382ms</td><td>500</td></tr><tr><td>2025-12-01T16:20:00Z</td><td>order-service</td><td>/api/orders</td><td class="slow">14444ms</td><td>502</td></tr><tr><td>2025-12-01T10:10:00Z</td><td>product-service</td><td>/api/checkout</td><td class="slow">14115ms</td><td>500</td></tr>
        </table>

        <h2>Performance by Endpoint</h2>
        <table>
            <tr><th>Endpoint</th><th>Requests</th><th>Avg (ms)</th><th>P95 (ms)</th><th>P99 (ms)</th><th>Max (ms)</th></tr>
            <tr><td>/api/checkout</td><td>6</td><td>18792.83</td><td>27691.0</td><td>29445.4</td><td class="slow">29884</td></tr><tr><td>/api/export</td><td>1</td><td>8618</td><td>8618</td><td>8618</td><td class="slow">8618</td></tr><tr><td>/api/analytics</td><td>2</td><td>8229</td><td>9303.6</td><td>9399.12</td><td class="slow">9423</td></tr><tr><td>/api/reports</td><td>5</td><td>7118.8</td><td>9789.4</td><td>9861.88</td><td class="slow">9880</td></tr><tr><td>/api/orders</td><td>17</td><td>6638.94</td><td>25778.6</td><td>27687.72</td><td class="slow">28165</td></tr><tr><td>/api/users</td><td>29</td><td>5974.48</td><td>27829.6</td><td>29695.76</td><td class="slow">29915</td></tr><tr><td>/api/admin</td><td>1</td><td>362</td><td>362</td><td>362</td><td class="">362</td></tr><tr><td>/api/login</td><td>5</td><td>190.2</td><td>395.4</td><td>420.68</td><td class="">427</td></tr><tr><td>/api/health</td><td>12</td><td>104.5</td><td>196.9</td><td>197.78</td><td class="">198</td></tr><tr><td>/api/search</td><td>9</td><td>92.11</td><td>178.4</td><td>182.88</td><td class="">184</td></tr><tr><td>/api/products</td><td>13</td><td>91</td><td>142.2</td><td>146.04</td><td class="">147</td></tr>
        </table>

        <h2>Performance by Service</h2>
        <table>
            <tr><th>Service</th><th>Requests</th><th>Avg (ms)</th><th>P95 (ms)</th><th>P99 (ms)</th></tr>
            <tr><td>database-service</td><td>3</td><td>7969.33</td><td>9753.8</td><td>9854.76</td></tr><tr><td>cache-service</td><td>2</td><td>7230</td><td>9207.3</td><td>9383.06</td></tr><tr><td>product-service</td><td>19</td><td>7040.11</td><td>24561.4</td><td>28819.48</td></tr><tr><td>user-service</td><td>21</td><td>4829</td><td>25182.0</td><td>28968.4</td></tr><tr><td>order-service</td><td>21</td><td>4389.9</td><td>28165.0</td><td>28938.6</td></tr><tr><td>api-gateway</td><td>24</td><td>3977.38</td><td>22222.0</td><td>25435.78</td></tr><tr><td>auth-service</td><td>4</td><td>391.75</td><td>490.4</td><td>498.08</td></tr><tr><td>security-monitor</td><td>6</td><td>229.5</td><td>428.25</td><td>439.25</td></tr>
        </table>

        <h2>Hourly Performance Trends</h2>
        <table>
            <tr><th>Hour (UTC)</th><th>Requests</th><th>Avg (ms)</th><th>P95 (ms)</th></tr>
            <tr><td>10:00</td><td>12</td><td>3738.42</td><td>20872.65</td></tr><tr><td>11:00</td><td>12</td><td>2702.75</td><td>10644.7</td></tr><tr><td>12:00</td><td>12</td><td>4948.08</td><td>24827.7</td></tr><tr><td>13:00</td><td>12</td><td>3488.33</td><td>15247.55</td></tr><tr><td>14:00</td><td>12</td><td>6652.08</td><td>24511.0</td></tr><tr><td>15:00</td><td>12</td><td>4917.67</td><td>23092.35</td></tr><tr><td>16:00</td><td>12</td><td>5829.83</td><td>20978.9</td></tr><tr><td>17:00</td><td>12</td><td>5782.92</td><td>29897.95</td></tr><tr><td>18:00</td><td>4</td><td>1851.75</td><td>6007.05</td></tr>
        </table>

        <h2>Resource Utilization Warnings</h2>

        <h3>Connection Pool Warnings (6)</h3>
        <div class="warning-box">
            <strong>order-service</strong> at 2025-12-01T10:00:00Z<br>
            Active: None/None connections, Wait time: Nonems
        </div><div class="warning-box">
            <strong>api-gateway</strong> at 2025-12-01T11:50:00Z<br>
            Active: 96/100 connections, Wait time: 4541ms
        </div><div class="warning-box">
            <strong>order-service</strong> at 2025-12-01T13:20:00Z<br>
            Active: None/None connections, Wait time: Nonems
        </div><div class="warning-box">
            <strong>database-service</strong> at 2025-12-01T13:50:00Z<br>
            Active: 98/100 connections, Wait time: 4402ms
        </div><div class="warning-box">
            <strong>database-service</strong> at 2025-12-01T15:10:00Z<br>
            Active: 99/100 connections, Wait time: 4105ms
        </div><div class="warning-box">
            <strong>database-service</strong> at 2025-12-01T17:45:00Z<br>
            Active: 97/100 connections, Wait time: 3354ms
        </div>

        <h3>Memory Warnings (6)</h3>
        <div class="warning-box">
            <strong>product-service</strong> at 2025-12-01T10:10:00Z<br>
            Memory: None/None MB, GC Pause: Nonems
        </div><div class="warning-box">
            <strong>product-service</strong> at 2025-12-01T11:55:00Z<br>
            Memory: None/None MB, GC Pause: Nonems
        </div><div class="warning-box">
            <strong>api-gateway</strong> at 2025-12-01T12:25:00Z<br>
            Memory: None/None MB, GC Pause: Nonems
        </div><div class="warning-box">
            <strong>api-gateway</strong> at 2025-12-01T14:40:00Z<br>
            Memory: None/None MB, GC Pause: Nonems
        </div><div class="warning-box">
            <strong>cache-service</strong> at 2025-12-01T15:40:00Z<br>
            Memory: 3558/4096 MB, GC Pause: 633ms
        </div><div class="warning-box">
            <strong>api-gateway</strong> at 2025-12-01T18:15:00Z<br>
            Memory: 3831/4096 MB, GC Pause: 629ms
        </div>

        <h3>Disk I/O Warnings (2)</h3>
        <div class="warning-box">
            <strong>cache-service</strong> at 2025-12-01T11:30:00Z<br>
            Read Latency: 209ms, Write Latency: 752ms, IOPS: 58
        </div><div class="warning-box">
            <strong>api-gateway</strong> at 2025-12-01T14:45:00Z<br>
            Read Latency: 495ms, Write Latency: 508ms, IOPS: 93
        </div>

        <h2>Capacity Planning Insights</h2>
        <h3>Peak Load Hours</h3>
        <div class="insight">
            <strong>14:00 UTC</strong> - Average response time: 6652.08ms
        </div><div class="insight">
            <strong>16:00 UTC</strong> - Average response time: 5829.83ms
        </div><div class="insight">
            <strong>17:00 UTC</strong> - Average response time: 5782.92ms
        </div>

        <h3>Recommendations</h3>
        <div class="warning-box">
            <strong>Connection Pool</strong> (HIGH)<br>
            Connection pool utilization at 97.5%. Consider increasing pool size or optimizing queries.
        </div><div class="warning-box">
            <strong>Memory</strong> (HIGH)<br>
            Memory usage at 90.2%. Consider increasing heap size or investigating memory leaks.
        </div>
    </div>
</body>
</html>