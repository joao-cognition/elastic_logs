<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Error Analysis Report - elastic_logs_29_11_25</title>
<style>
  :root { --critical: #dc3545; --high: #fd7e14; --medium: #ffc107; --low: #28a745;
           --bg: #f8f9fa; --card-bg: #fff; --border: #dee2e6; --text: #212529; }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
         background: var(--bg); color: var(--text); line-height: 1.6; padding: 2rem; }
  .container { max-width: 1400px; margin: 0 auto; }
  h1 { color: var(--critical); margin-bottom: 0.5rem; font-size: 2rem; }
  h2 { color: #495057; margin: 2rem 0 1rem; padding-bottom: 0.5rem;
       border-bottom: 2px solid var(--critical); }
  h3 { color: #6c757d; margin: 1.5rem 0 0.75rem; }
  .meta { color: #6c757d; margin-bottom: 2rem; }
  .summary-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                   gap: 1rem; margin: 1.5rem 0; }
  .summary-card { background: var(--card-bg); border-radius: 8px; padding: 1.5rem;
                   box-shadow: 0 2px 4px rgba(0,0,0,0.1); text-align: center; }
  .summary-card .value { font-size: 2.5rem; font-weight: 700; }
  .summary-card .label { color: #6c757d; font-size: 0.9rem; }
  .critical .value { color: var(--critical); }
  .high .value { color: var(--high); }
  table { width: 100%; border-collapse: collapse; margin: 1rem 0; background: var(--card-bg);
           border-radius: 8px; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
  th { background: #343a40; color: white; padding: 0.75rem 1rem; text-align: left;
       font-weight: 600; }
  td { padding: 0.6rem 1rem; border-bottom: 1px solid var(--border); }
  tr:hover { background: #f1f3f5; }
  tr.critical { background: #fff5f5; }
  tr.high { background: #fff8f0; }
  .bar { background: var(--critical); height: 20px; border-radius: 3px; }
  .msg-cell { max-width: 300px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
  code { background: #e9ecef; padding: 2px 6px; border-radius: 3px; font-size: 0.85rem; }
  .root-cause { background: var(--card-bg); border-left: 4px solid var(--critical);
                 padding: 1rem 1.5rem; margin: 1rem 0; border-radius: 0 8px 8px 0;
                 box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
  .root-cause h4 { color: var(--critical); margin-bottom: 0.5rem; }
  .remediation { background: #d4edda; border-left: 4px solid var(--low);
                  padding: 0.75rem 1rem; margin: 0.5rem 0; border-radius: 0 4px 4px 0; }
  .section { margin-bottom: 2.5rem; }
  footer { margin-top: 3rem; padding-top: 1rem; border-top: 1px solid var(--border);
           color: #6c757d; font-size: 0.85rem; }
</style>
</head>
<body>
<div class="container">
  <h1>Error Analysis Report</h1>
  <p class="meta">Log File: elastic_logs_29_11_25.json | Generated: 2026-02-12 14:38:24 UTC</p>

  <div class="summary-grid">
    <div class="summary-card"><div class="value">100</div><div class="label">Total Log Entries</div></div>
    <div class="summary-card critical"><div class="value">11</div><div class="label">Total Errors</div></div>
    <div class="summary-card high"><div class="value">11.0%</div><div class="label">Error Rate</div></div>
    <div class="summary-card"><div class="value">5</div><div class="label">Cascade Errors</div></div>
  </div>

  <div class="section">
    <h2>1. Error Frequency by HTTP Status Code</h2>
    <table><thead><tr><th>Status Code</th><th>Count</th><th>% of Errors</th></tr></thead>
    <tbody><tr><td>503</td><td>6</td><td>54.5%</td></tr>
<tr><td>502</td><td>2</td><td>18.2%</td></tr>
<tr><td>504</td><td>2</td><td>18.2%</td></tr>
<tr><td>500</td><td>1</td><td>9.1%</td></tr>
</tbody></table>
  </div>

  <div class="section">
    <h2>2. Errors by Service</h2>
    <table><thead><tr><th>Service</th><th>Error Count</th><th>% of Errors</th></tr></thead>
    <tbody><tr><td>security-monitor</td><td>3</td><td>27.3%</td></tr>
<tr><td>order-service</td><td>3</td><td>27.3%</td></tr>
<tr><td>product-service</td><td>2</td><td>18.2%</td></tr>
<tr><td>cache-service</td><td>2</td><td>18.2%</td></tr>
<tr><td>api-gateway</td><td>1</td><td>9.1%</td></tr>
</tbody></table>
  </div>

  <div class="section">
    <h2>3. Error Message Classification</h2>
    <table><thead><tr><th>Error Message</th><th>Count</th><th>% of Errors</th></tr></thead>
    <tbody><tr><td>Internal server error: database connection pool exhausted</td><td>4</td><td>36.4%</td></tr>
<tr><td>Request timeout: upstream service unavailable</td><td>3</td><td>27.3%</td></tr>
<tr><td>Internal server error: out of memory exception</td><td>2</td><td>18.2%</td></tr>
<tr><td>Connection refused: service unreachable</td><td>2</td><td>18.2%</td></tr>
</tbody></table>
  </div>

  <div class="section">
    <h2>4. Errors by Endpoint</h2>
    <table><thead><tr><th>Endpoint</th><th>Error Count</th><th>Error Rate</th></tr></thead>
    <tbody><tr><td>/api/users</td><td>3</td><td>18.75%</td></tr>
<tr><td>/api/products</td><td>2</td><td>15.38%</td></tr>
<tr><td>/api/orders</td><td>2</td><td>28.57%</td></tr>
<tr><td>/api/reports</td><td>2</td><td>10.0%</td></tr>
<tr><td>/api/search</td><td>1</td><td>6.25%</td></tr>
<tr><td>/api/health</td><td>1</td><td>5.26%</td></tr>
</tbody></table>
  </div>

  <div class="section">
    <h2>5. Error Distribution Over Time</h2>
    <table><thead><tr><th>Hour (UTC)</th><th>Error Count</th><th>Distribution</th></tr></thead>
    <tbody><tr><td>11:00</td><td>2</td><td><div class='bar' style='width:80px'></div></td></tr>
<tr><td>13:00</td><td>4</td><td><div class='bar' style='width:160px'></div></td></tr>
<tr><td>14:00</td><td>4</td><td><div class='bar' style='width:160px'></div></td></tr>
<tr><td>18:00</td><td>1</td><td><div class='bar' style='width:40px'></div></td></tr>
</tbody></table>
  </div>

  <div class="section">
    <h2>6. Error Cascade Detection</h2>
    <p>Errors occurring within 10 minutes of a previous error (potential cascades):</p>
    <table><thead><tr><th>Log ID</th><th>Timestamp</th><th>Service</th><th>Message</th></tr></thead>
    <tbody><tr><td>log-0039</td><td>2025-11-29T13:10:00Z</td><td>order-service</td><td>Request timeout: upstream service unavailable</td></tr>
<tr><td>log-0048</td><td>2025-11-29T13:55:00Z</td><td>product-service</td><td>Request timeout: upstream service unavailable</td></tr>
<tr><td>log-0057</td><td>2025-11-29T14:40:00Z</td><td>security-monitor</td><td>Internal server error: out of memory exception</td></tr>
<tr><td>log-0059</td><td>2025-11-29T14:50:00Z</td><td>cache-service</td><td>Connection refused: service unreachable</td></tr>
<tr><td>log-0060</td><td>2025-11-29T14:55:00Z</td><td>product-service</td><td>Connection refused: service unreachable</td></tr>
</tbody></table>
  </div>

  <div class="section">
    <h2>7. Root Cause Analysis &amp; Remediation</h2>
    
    <div class="root-cause">
      <h4>Database Connection Pool Exhaustion (4 occurrences)</h4>
      <p><strong>Impact:</strong> Causes 500/503/504 errors with response times 12-27s.
         Multiple services affected including order-service, api-gateway, security-monitor.</p>
      <p><strong>Root Cause:</strong> Connection pool limit reached under load.
         Connections not being released properly or pool size too small for traffic volume.</p>
      <div class="remediation">
        <strong>Remediation:</strong>
        <ul>
          <li>Increase connection pool size (current likely 100, recommend 200+)</li>
          <li>Implement connection timeout and idle connection cleanup</li>
          <li>Add connection pool monitoring and alerting</li>
          <li>Review connection leak patterns in application code</li>
          <li>Consider implementing connection pooling middleware (e.g., PgBouncer)</li>
        </ul>
      </div>
    </div>
    <div class="root-cause">
      <h4>Upstream Service Unavailability (3 occurrences)</h4>
      <p><strong>Impact:</strong> Returns 500/502/503 errors. Services cannot reach dependencies,
         causing cascading failures across the microservices architecture.</p>
      <p><strong>Root Cause:</strong> Downstream services becoming unresponsive due to
         resource exhaustion (likely related to DB pool exhaustion).</p>
      <div class="remediation">
        <strong>Remediation:</strong>
        <ul>
          <li>Implement circuit breaker pattern (e.g., Resilience4j)</li>
          <li>Add retry with exponential backoff for transient failures</li>
          <li>Configure proper timeout values for inter-service communication</li>
          <li>Implement health check endpoints and readiness probes</li>
          <li>Add fallback mechanisms for critical service calls</li>
        </ul>
      </div>
    </div>
    <div class="root-cause">
      <h4>Out of Memory Exceptions (2 occurrences)</h4>
      <p><strong>Impact:</strong> Causes 503 errors with extreme response times (20-29s).
         Affects security-monitor and cache-service.</p>
      <p><strong>Root Cause:</strong> JVM heap exhaustion from memory leaks or
         insufficient heap allocation for workload.</p>
      <div class="remediation">
        <strong>Remediation:</strong>
        <ul>
          <li>Increase JVM heap size (-Xmx) based on actual usage patterns</li>
          <li>Profile memory usage to identify leaks (use tools like YourKit/JProfiler)</li>
          <li>Implement proper resource cleanup in try-with-resources blocks</li>
          <li>Add GC logging and monitoring for early detection</li>
          <li>Consider container memory limits alignment with JVM settings</li>
        </ul>
      </div>
    </div>
    <div class="root-cause">
      <h4>Service Unreachable - Connection Refused (2 occurrences)</h4>
      <p><strong>Impact:</strong> Returns 503 errors. Services completely unable to
         establish connections to dependent services.</p>
      <p><strong>Root Cause:</strong> Target service is down, crashed, or network
         connectivity issues between services.</p>
      <div class="remediation">
        <strong>Remediation:</strong>
        <ul>
          <li>Implement service mesh for better traffic management (e.g., Istio)</li>
          <li>Add automatic service restart on failure (Kubernetes liveness probes)</li>
          <li>Configure proper resource limits to prevent OOM kills</li>
          <li>Implement graceful degradation for non-critical dependencies</li>
        </ul>
      </div>
    </div>
  </div>

  <div class="section">
    <h2>8. Detailed Error Log</h2>
    <table><thead><tr><th>Log ID</th><th>Timestamp</th><th>Service</th><th>Status</th>
    <th>Endpoint</th><th>Response Time</th><th>Message</th><th>Stack Trace</th></tr></thead>
    <tbody><tr class='high'><td>log-0013</td><td>2025-11-29T11:00:00Z</td><td>security-monitor</td><td>502</td><td>/api/products</td><td>14644ms</td><td class='msg-cell'>Request timeout: upstream service unavailable</td><td><code>at com.example.service.Handler.process(Handler.java:497)</code></td></tr>
<tr class='high'><td>log-0020</td><td>2025-11-29T11:35:00Z</td><td>security-monitor</td><td>504</td><td>/api/search</td><td>23008ms</td><td class='msg-cell'>Internal server error: database connection pool exhausted</td><td><code>at com.example.service.Handler.process(Handler.java:255)</code></td></tr>
<tr class='high'><td>log-0038</td><td>2025-11-29T13:05:00Z</td><td>order-service</td><td>502</td><td>/api/orders</td><td>27561ms</td><td class='msg-cell'>Internal server error: database connection pool exhausted</td><td><code>at com.example.service.Handler.process(Handler.java:296)</code></td></tr>
<tr class='critical'><td>log-0039</td><td>2025-11-29T13:10:00Z</td><td>order-service</td><td>500</td><td>/api/orders</td><td>15652ms</td><td class='msg-cell'>Request timeout: upstream service unavailable</td><td><code>at com.example.service.Handler.process(Handler.java:407)</code></td></tr>
<tr class='high'><td>log-0047</td><td>2025-11-29T13:50:00Z</td><td>api-gateway</td><td>504</td><td>/api/reports</td><td>12194ms</td><td class='msg-cell'>Internal server error: database connection pool exhausted</td><td><code>at com.example.service.Handler.process(Handler.java:259)</code></td></tr>
<tr class='critical'><td>log-0048</td><td>2025-11-29T13:55:00Z</td><td>product-service</td><td>503</td><td>/api/users</td><td>15896ms</td><td class='msg-cell'>Request timeout: upstream service unavailable</td><td><code>at com.example.service.Handler.process(Handler.java:117)</code></td></tr>
<tr class='critical'><td>log-0056</td><td>2025-11-29T14:35:00Z</td><td>order-service</td><td>503</td><td>/api/users</td><td>22108ms</td><td class='msg-cell'>Internal server error: database connection pool exhausted</td><td><code>at com.example.service.Handler.process(Handler.java:215)</code></td></tr>
<tr class='critical'><td>log-0057</td><td>2025-11-29T14:40:00Z</td><td>security-monitor</td><td>503</td><td>/api/reports</td><td>29435ms</td><td class='msg-cell'>Internal server error: out of memory exception</td><td><code>at com.example.service.Handler.process(Handler.java:220)</code></td></tr>
<tr class='critical'><td>log-0059</td><td>2025-11-29T14:50:00Z</td><td>cache-service</td><td>503</td><td>/api/products</td><td>18462ms</td><td class='msg-cell'>Connection refused: service unreachable</td><td><code>at com.example.service.Handler.process(Handler.java:267)</code></td></tr>
<tr class='critical'><td>log-0060</td><td>2025-11-29T14:55:00Z</td><td>product-service</td><td>503</td><td>/api/users</td><td>21802ms</td><td class='msg-cell'>Connection refused: service unreachable</td><td><code>at com.example.service.Handler.process(Handler.java:298)</code></td></tr>
<tr class='critical'><td>log-0097</td><td>2025-11-29T18:00:00Z</td><td>cache-service</td><td>503</td><td>/api/health</td><td>20547ms</td><td class='msg-cell'>Internal server error: out of memory exception</td><td><code>at com.example.service.Handler.process(Handler.java:288)</code></td></tr>
</tbody></table>
  </div>

  <footer>Report generated by Elastic Logs Analysis Pipeline | Data period: 2025-11-29</footer>
</div>
</body></html>